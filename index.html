<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cashback Benchmark</title>
  <style>
    :root {
      --bg: #f4f3ef;
      --card: #fffdf8;
      --text: #1f2b2a;
      --muted: #566461;
      --accent: #0d8c7c;
      --accent-soft: #e4f4ef;
      --accent-warm: #f4b266;
      --border: #e2e6e0;
      --shadow: 0 18px 40px rgba(31, 43, 42, 0.12);
      --shadow-soft: 0 10px 22px rgba(31, 43, 42, 0.08);
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
      color: var(--text);
      background: var(--bg);
      font-family: "Gill Sans", "Trebuchet MS", "Verdana", sans-serif;
    }

    body {
      display: flex;
      overflow: hidden;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(13, 140, 124, 0.08), transparent 45%),
        radial-gradient(circle at 85% 15%, rgba(244, 178, 102, 0.14), transparent 50%),
        radial-gradient(circle at 15% 85%, rgba(13, 140, 124, 0.06), transparent 50%),
        linear-gradient(120deg, #f7f4ed 0%, #f3f6f1 45%, #f6f4ef 100%);
    }

    .sidebar {
      width: 250px;
      background: rgba(255, 253, 248, 0.92);
      backdrop-filter: blur(12px);
      border-right: 1px solid var(--border);
      padding: 24px 18px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .brand {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .brand .logo {
      width: 140px;
      height: auto;
      object-fit: contain;
    }

    .brand h1 {
      font-size: 16px;
      margin: 0;
      letter-spacing: 0.3px;
      color: var(--text);
      font-family: "Georgia", "Times New Roman", serif;
    }

    .brand p {
      margin: 0;
      color: var(--muted);
      font-size: 12px;
    }

    .nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 6px;
      overflow-y: auto;
      scrollbar-width: thin;
    }

    .nav-list a {
      display: block;
      padding: 8px 10px;
      border-radius: 8px;
      text-decoration: none;
      color: var(--muted);
      border: 1px solid transparent;
      transition: all 0.2s ease;
      font-size: 13px;
    }

    .nav-list a:hover {
      color: var(--text);
      border-color: var(--border);
      background: #f7fbf9;
    }

    .nav-list a.active {
      color: var(--text);
      background: var(--accent-soft);
      border-color: #c8e3dc;
    }

    .sidebar .meta {
      margin-top: auto;
      padding-top: 12px;
      border-top: 1px solid var(--border);
      color: var(--muted);
      font-size: 12px;
      line-height: 1.4;
    }

    .deck {
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100vh;
      min-width: 0;
    }

    .topbar {
      height: 58px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      background: rgba(255, 253, 248, 0.94);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
    }

    .topbar .title {
      font-size: 12px;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      color: var(--muted);
    }

    .controls {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .lang-toggle {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid var(--border);
      background: #ffffff;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 12px;
    }

    .lang-btn {
      border: none;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      padding: 2px 6px;
      font-size: 12px;
    }

    .lang-btn.active {
      color: var(--text);
      font-weight: 700;
    }

    .lang-sep {
      color: #cdd8ea;
    }

    .btn {
      background: #ffffff;
      color: var(--text);
      border: 1px solid var(--border);
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 12px;
      cursor: pointer;
      transition: transform 0.2s ease, border 0.2s ease, background 0.2s ease;
    }

    .btn:hover {
      background: var(--accent-soft);
      border-color: #c8e3dc;
      transform: translateY(-1px);
    }

    .btn:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      transform: none;
    }

    .deck-main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 32px 56px;
    }

    .stage {
      position: relative;
      width: min(1280px, 100%);
      aspect-ratio: 16 / 9;
      max-height: 100%;
    }

    .slides {
      position: absolute;
      inset: 0;
    }

    .slide {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      display: none;
      flex-direction: column;
      gap: 20px;
      padding: 56px 64px;
      border-radius: 18px;
      background: linear-gradient(145deg, #fffdf8 0%, #fdf9f2 100%);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      align-items: flex-start;
      text-align: left;
    }

    .watermark {
      position: absolute;
      left: 24px;
      bottom: 20px;
      width: 72px;
      height: auto;
      opacity: 0.55;
      pointer-events: none;
    }

    .slide.active {
      display: flex;
    }

    .slide h2 {
      margin: 0;
      font-size: 34px;
      font-weight: 700;
      color: var(--text);
      font-family: "Georgia", "Times New Roman", serif;
    }

    .slide p {
      margin: 0;
      color: var(--muted);
    }

    .cover {
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 18px;
    }

    .cover .cover-logo {
      width: 280px;
      max-width: 60%;
      height: auto;
    }

    .cover .cover-title {
      font-size: 44px;
      font-weight: 700;
      margin: 0;
      color: var(--text);
      font-family: "Georgia", "Times New Roman", serif;
    }

    .agenda-list {
      margin: 0;
      padding-left: 22px;
      font-size: 18px;
      line-height: 1.5;
      color: var(--text);
      columns: 2;
      column-gap: 36px;
    }

    .agenda-list li {
      break-inside: avoid;
      margin: 6px 0;
    }

    .definition-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 24px;
    }

    .cashback-diagram {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 24px;
      flex: 1;
      width: 100%;
      align-items: stretch;
    }

    .diagram-panel {
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 26px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      text-align: center;
    }

    .diagram-icon {
      width: 132px;
      height: 132px;
      border-radius: 28px;
      background: var(--accent-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
    }

    .diagram-panel.promo .diagram-icon {
      background: #fff1df;
      color: #c97722;
    }

    .diagram-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text);
      margin: 0;
    }

    .definition-badge {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.4px;
      border: 1px solid var(--border);
      background: #f8faf6;
      color: var(--text);
      font-weight: 700;
    }

    .definition-badge.real {
      background: #e6f5f0;
      border-color: #b9e1d8;
      color: #147a69;
    }

    .definition-badge.promo {
      background: #fff1df;
      border-color: #f2cfad;
      color: #b1691b;
    }

    .diagram-keywords {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .diagram-keywords span {
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 13px;
      border: 1px solid var(--border);
      background: #f8faf6;
      color: var(--text);
    }

    .diagram-bullets {
      margin: 0;
      padding-left: 18px;
      font-size: 14px;
      line-height: 1.45;
      color: var(--text);
      text-align: left;
    }

    .diagram-bullets li {
      margin: 4px 0;
    }

    .mini-flow {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 4px;
    }

    .mini-pill {
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid var(--border);
      background: #f8faf6;
      color: var(--text);
      font-weight: 600;
    }

    .mini-pill.real {
      background: var(--accent-soft);
      border-color: #c8e3dc;
      color: #145d54;
    }

    .mini-pill.promo {
      background: #fff1df;
      border-color: #f2cfad;
      color: #8a5717;
    }

    .mini-arrow {
      color: var(--muted);
      font-weight: 700;
    }

    .definition-card {
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px 22px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .definition-card h3 {
      margin: 0;
      font-size: 20px;
      color: var(--text);
      font-family: "Georgia", "Times New Roman", serif;
    }

    .definition-card ul {
      margin: 0;
      padding-left: 18px;
      font-size: 16px;
      line-height: 1.5;
      color: var(--text);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      width: 100%;
    }

    .app-title {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .app-region {
      font-size: 12px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: var(--muted);
    }

    .app-header-logo {
      width: 120px;
      height: 54px;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 8px 10px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .app-header-logo img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .app-body {
      display: grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 28px;
      flex: 1;
      width: 100%;
    }

    .app-visual {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 14px;
    }

    .app-logo-card {
      flex: 1;
      width: 100%;
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 24px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .app-logo-card img {
      max-width: 70%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
    }

    .app-links {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .app-link {
      padding: 8px 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 13px;
      text-decoration: none;
      color: var(--text);
      background: #ffffff;
      transition: all 0.2s ease;
    }

    .app-link.primary {
      background: linear-gradient(135deg, var(--accent) 0%, #14a892 100%);
      border-color: var(--accent);
      color: #ffffff;
    }

    .app-link:hover {
      border-color: #c8e3dc;
      box-shadow: var(--shadow-soft);
    }

    .app-study {
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 22px 24px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .study-section {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .study-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.4px;
      color: var(--muted);
      font-weight: 600;
    }

    .study-line {
      font-size: 14px;
      color: var(--text);
      line-height: 1.4;
    }

    .study-line.inline {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .study-list {
      margin: 0;
      padding-left: 18px;
      font-size: 14px;
      color: var(--text);
      line-height: 1.4;
    }

    .study-list li {
      margin: 4px 0;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.2px;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .tag.real,
    .tag.merchant {
      background: #e6f5f0;
      color: #147a69;
      border-color: #b9e1d8;
    }

    .tag.promo,
    .tag.issuer {
      background: #fff1df;
      color: #b1691b;
      border-color: #f2cfad;
    }

    .tag.partner {
      background: #eef3ff;
      color: #3b5b9a;
      border-color: #cdd8ea;
    }

    .tag.hybrid {
      background: #f1f3f5;
      color: #4b5563;
      border-color: #d6dbe1;
    }

    .tag.instant {
      background: #e4f4ef;
      color: #0d8c7c;
      border-color: #c8e3dc;
    }

    .tag.delayed {
      background: #f7eee4;
      color: #9a5a2b;
      border-color: #e7d2bf;
    }

    .takeaways-list {
      margin: 0;
      padding-left: 22px;
      font-size: 18px;
      line-height: 1.5;
      color: var(--text);
    }

    .overview-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .overview-wrap {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px 16px;
      width: 100%;
      align-content: start;
    }

    .overview-heading {
      font-size: 14px;
      font-weight: 700;
      color: var(--text);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .overview-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      width: 100%;
    }

    .overview-card {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      text-align: center;
      text-decoration: none;
      color: var(--text);
      transition: transform 0.2s ease, border 0.2s ease;
    }

    .overview-card:hover {
      transform: translateY(-2px);
      border-color: #c8e3dc;
    }

    .overview-logo {
      width: 58px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .overview-logo img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .overview-name {
      font-size: 9px;
      font-weight: 600;
    }

    .overview-badge {
      font-size: 8px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f8faf6;
      color: var(--text);
    }

    .overview-badge.real {
      border-color: #b9e1d8;
      color: #147a69;
      background: #e6f5f0;
    }

    .overview-badge.promo {
      border-color: #f2cfad;
      color: #b1691b;
      background: #fff1df;
    }

    .overview-note {
      margin-top: 8px;
      font-size: 12px;
      color: var(--muted);
      text-align: center;
      width: 100%;
    }

    .overview-slide {
      gap: 10px;
    }

    .overview-slide .overview-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }

    .vision-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 24px;
      width: 100%;
    }

    .vision-flow {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 6px;
    }

    .vision-node {
      padding: 16px 18px;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      min-width: 180px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
    }

    .vision-node.highlight {
      background: #f4fbf8;
      border-color: #c8e3dc;
    }

    .vision-icon {
      width: 42px;
      height: 42px;
      border-radius: 14px;
      background: var(--accent-soft);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .vision-arrow {
      color: var(--accent);
      font-weight: 700;
      font-size: 20px;
    }

    .flow-diagram {
      flex: 1;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      flex-wrap: wrap;
    }

    .flow-step {
      padding: 18px 20px;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      min-width: 170px;
      max-width: 230px;
      line-height: 1.35;
    }

    .flow-icon {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      background: var(--accent-soft);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flow-label {
      font-weight: 600;
      font-size: 16px;
    }

    .flow-sub {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.3;
    }

    .flow-arrow {
      font-size: 22px;
      font-weight: 700;
      color: var(--accent);
      opacity: 0.85;
    }

    .roadmap-grid {
      width: 100%;
      flex: 1;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 18px;
    }

    .roadmap-visual {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .roadmap-track {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 18px;
      position: relative;
      margin-bottom: 14px;
    }

    .roadmap-track::before {
      display: none;
    }

    .roadmap-connector {
      flex: 1;
      max-width: 90px;
      min-width: 40px;
      height: 2px;
      background: #e2e6e0;
      position: relative;
    }

    .roadmap-connector::after {
      content: '';
      position: absolute;
      right: -2px;
      top: -4px;
      border: 5px solid transparent;
      border-left-color: #c8d1cd;
    }

    .roadmap-node {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .roadmap-dot {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 1px solid var(--border);
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
    }

    .roadmap-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.4px;
      color: var(--muted);
      font-weight: 700;
    }

    .roadmap-icon {
      width: 34px;
      height: 34px;
      border-radius: 12px;
      background: #f8faf6;
      border: 1px solid var(--border);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .roadmap-card {
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px 22px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .roadmap-phase {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      color: var(--muted);
      font-weight: 700;
    }

    .roadmap-title {
      margin: 0;
      font-size: 18px;
      font-weight: 700;
      color: var(--text);
    }

    .roadmap-text {
      margin: 0;
      font-size: 14px;
      line-height: 1.45;
      color: var(--text);
    }

    .role-card {
      width: 100%;
      max-width: 860px;
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 24px 26px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 14px;
      align-self: center;
    }

    .role-visual {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }

    .role-badge {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: #f8faf6;
      box-shadow: var(--shadow-soft);
    }

    .role-badge-icon {
      width: 44px;
      height: 44px;
      border-radius: 14px;
      background: var(--accent-soft);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .role-summary {
      font-size: 12px;
      color: var(--muted);
    }

    .role-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .role-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #ffffff;
      font-size: 12px;
      color: var(--text);
      font-weight: 600;
    }

    .role-pill-icon {
      width: 20px;
      height: 20px;
      border-radius: 8px;
      background: #eef3ff;
      color: #3b5b9a;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .role-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text);
    }

    .role-list {
      margin: 0;
      padding-left: 20px;
      font-size: 16px;
      line-height: 1.5;
      color: var(--text);
    }

    .logic-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 24px;
      width: 100%;
      flex: 1;
    }

    .logic-panel {
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 22px 24px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .logic-panel.missions {
      background: #f4fbf8;
      border-color: #c8e3dc;
    }

    .logic-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text);
    }

    .logic-flow {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
    }

    .logic-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .logic-legend-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #ffffff;
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.3px;
      font-weight: 700;
    }

    .logic-legend-icon {
      width: 18px;
      height: 18px;
      border-radius: 6px;
      background: #f1f3f5;
      color: var(--muted);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logic-step {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f8faf6;
      font-size: 12px;
      font-weight: 700;
      color: var(--text);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .logic-step-icon {
      width: 20px;
      height: 20px;
      border-radius: 8px;
      background: #f1f3f5;
      color: var(--muted);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logic-panel.missions .logic-step {
      background: #e6f5f0;
      border-color: #b9e1d8;
      color: #147a69;
    }

    .logic-panel.missions .logic-step-icon {
      background: #e6f5f0;
      color: #147a69;
    }

    .logic-arrow {
      color: var(--muted);
      font-weight: 700;
    }

    .logic-callout {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px dashed #cfe0d9;
      background: #f8faf6;
      font-size: 13px;
      color: var(--muted);
    }

    .logic-loop {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
    }

    .logic-loop .loop-pill {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid #b9e1d8;
      background: #e6f5f0;
      color: #147a69;
      font-size: 12px;
      font-weight: 700;
    }

    .comparison-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .comparison-legend .tag {
      font-size: 9px;
      padding: 2px 6px;
    }

    .comparison-grid {
      width: 100%;
      display: grid;
      grid-template-columns: 1.2fr 0.8fr 0.9fr 0.8fr;
      gap: 6px 8px;
    }

    .comparison-split {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .comparison-header {
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--muted);
      font-weight: 700;
    }

    .comparison-cell {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 4px 6px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 10px;
      color: var(--text);
    }

    .comparison-cell.compact {
      justify-content: center;
      text-align: center;
    }

    .comparison-app-link {
      text-decoration: none;
      color: inherit;
      transition: transform 0.2s ease, border 0.2s ease;
    }

    .comparison-app-link:hover {
      border-color: #c8e3dc;
      transform: translateY(-1px);
    }

    .comparison-logo {
      width: 26px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .comparison-logo img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .comparison-app {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .comparison-name {
      font-size: 10px;
      font-weight: 700;
    }

    .comparison-region {
      font-size: 8px;
      color: var(--muted);
    }

    .comparison-note {
      font-size: 11px;
      color: var(--muted);
      text-align: center;
      width: 100%;
    }

    .logo-wall {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(9, minmax(0, 1fr));
      gap: 8px;
    }

    .logo-wall-item {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px;
      background: #ffffff;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s ease, border 0.2s ease;
    }

    .logo-wall-item:hover {
      transform: translateY(-2px);
      border-color: #c8e3dc;
    }

    .logo-wall-item img {
      max-width: 100%;
      max-height: 28px;
      object-fit: contain;
    }

    .progress {
      font-size: 12px;
      color: var(--muted);
    }

    @media (max-width: 1100px) {
      .slide { padding: 44px 48px; }
      .slide h2 { font-size: 28px; }
      .app-body { grid-template-columns: 1fr; }
      .app-logo-card { min-height: 240px; }
      .app-study { padding: 18px; }
      .overview-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .vision-grid { grid-template-columns: 1fr; }
      .vision-flow { flex-direction: column; }
      .logic-grid { grid-template-columns: 1fr; }
      .roadmap-grid { grid-template-columns: 1fr; }
      .roadmap-track { flex-direction: column; gap: 12px; }
      .roadmap-track::before { display: none; }
      .roadmap-connector { display: none; }
      .flow-diagram { flex-direction: column; }
      .flow-arrow { transform: rotate(90deg); }
      .role-card { max-width: 100%; }
      .role-visual { flex-direction: column; align-items: flex-start; }
      .comparison-grid { grid-template-columns: 1fr; }
      .comparison-split { grid-template-columns: 1fr; }
      .comparison-header { display: none; }
      .comparison-cell.compact { justify-content: flex-start; }
      .logo-wall { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }

    @media (max-width: 900px) {
      body { flex-direction: column; }
      .sidebar {
        width: 100%;
        flex-direction: row;
        align-items: center;
        overflow-x: auto;
        padding: 12px 16px;
        border-right: none;
        border-bottom: 1px solid var(--border);
      }
      .brand { min-width: 180px; }
      .nav-list {
        flex-direction: row;
        gap: 6px;
        flex: 1;
      }
      .nav-list a {
        white-space: nowrap;
        font-size: 12px;
      }
      .sidebar .meta { display: none; }
      .deck { height: auto; }
      .deck-main { padding: 18px; }
      .stage { width: 100%; }
    }

    @media print {
      body {
        background: white;
        color: black;
        overflow: visible;
        display: block;
      }
      .sidebar, .topbar { display: none !important; }
      .deck { display: block; height: auto; }
      .deck-main { padding: 0; }
      .stage { width: 100%; aspect-ratio: auto; }
      .slides { position: static; }
      .slide {
        position: relative;
        display: block !important;
        width: 100%;
        height: auto;
        page-break-after: always;
        border: 1px solid #d0d0d0;
        border-radius: 0;
        box-shadow: none;
        background: white;
        padding: 48px 56px;
      }
    }

    :fullscreen body,
    :-webkit-full-screen body {
      background: #ffffff;
    }

    :fullscreen .sidebar,
    :-webkit-full-screen .sidebar {
      display: none !important;
    }

    :fullscreen .deck,
    :-webkit-full-screen .deck {
      height: 100vh;
    }

    :fullscreen .deck-main,
    :-webkit-full-screen .deck-main {
      padding: 12px;
    }

    :fullscreen .stage,
    :-webkit-full-screen .stage {
      width: min(1600px, 100%);
      max-height: 100%;
    }
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="brand">
      <img class="logo" src="assets/Tomorrow_Systems_Logo.webp" alt="Tomorrow Systems logo" />
      <h1 id="deckTitle">Cashback Benchmark</h1>
      <p id="deckSubtitle"></p>
    </div>
    <ul class="nav-list" id="slideNav"></ul>
   
  </aside>

  <div class="deck">
    <div class="topbar">
      <div class="title" id="slideTitle">Slide 1</div>
      <div class="controls">
        <span class="progress" id="progress">1 / 1</span>
        <button class="btn" id="prevBtn">Prev</button>
        <button class="btn" id="nextBtn">Next</button>
        <button class="btn" id="fsBtn">Fullscreen</button>
        <div class="lang-toggle" id="langToggle" aria-label="Language">
          <button class="lang-btn" type="button" data-lang="en">EN</button>
          <span class="lang-sep">|</span>
          <button class="lang-btn" type="button" data-lang="fr">FR</button>
        </div>
      </div>
    </div>

    <div class="deck-main">
      <div class="stage">
        <div class="slides" id="slidesRoot"></div>
      </div>
    </div>
  </div>

  <script>
    const slidesRoot = document.getElementById('slidesRoot');
    const navList = document.getElementById('slideNav');
    const title = document.getElementById('slideTitle');
    const progress = document.getElementById('progress');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const fsBtn = document.getElementById('fsBtn');
    const langToggle = document.getElementById('langToggle');
    const deckTitle = document.getElementById('deckTitle');
    const deckSubtitle = document.getElementById('deckSubtitle');

    const i18n = {
      en: {
        labels: {
          positioning: 'Positioning',
          mechanics: 'Mechanics',
          business: 'Business Model',
          wins: 'Why it wins',
          risks: 'Risks',
          website: 'Website',
          getApp: 'Get the App',
          earn: 'Earn',
          timing: 'Benefit timing',
          funding: 'Funding source',
          type: 'Type',
          model: 'Cashback model',
          strengths: 'Strengths',
          limits: 'Limits',
          why: 'Why it matters for Missions',
          region: 'Region',
          rate: 'Cashback rate'
        },
        ui: {
          deckTitle: 'Cashback Benchmark',
          deckSubtitle: '',
          prev: 'Prev',
          next: 'Next',
          fullscreen: 'Fullscreen'
        },
        definition: {
          title: 'What we mean by Cashback',
          leftTitle: 'Real Cashback',
          leftKeywords: ['Money back', 'Withdrawable'],
          leftBadge: 'Permanent balance',
          leftFlow: ['Spend', 'Cashback', 'Withdrawable wallet'],
          leftBullets: [
            'Definition: user earns real money (redeemable balance).',
            'Source: usually merchant-funded (affiliate/partner payout).',
            'Tracking: validated purchase (affiliate link / partner confirmation / card-linked).',
            'Redemption: cash-out / wallet / bank transfer.'
          ],
          rightTitle: 'Promo Rewards',
          rightKeywords: ['Bonus', 'Campaign-based'],
          rightBadge: 'Temporary rewards',
          rightFlow: ['Action / Spend', 'Points / Bonus', 'Voucher / Discount'],
          rightBullets: [
            'Definition: campaign incentives (bonus, points, vouchers).',
            'Source: issuer/telco/brand promo budgets.',
            'Tracking: often instant inside app (rules).',
            'Redemption: points/vouchers/discounts; may expire; not always withdrawable.'
          ],
          keyRule: 'Withdrawable money balance = Real Cashback. Time-limited points/vouchers = Promo Rewards.'
        },
        modelDescriptions: {
          real: 'Permanent, withdrawable balance',
          promo: 'Points/bonuses tied to campaigns'
        },
        defaults: {
          rate: 'Varies by offer'
        },
        whyDefaults: {
          real: [
            'Shows demand for withdrawable cashback',
            'Highlights merchant funding + confirmation delays'
          ],
          promo: [
            'Proves campaigns drive fast activation',
            'Shows engagement is limited without missions'
          ]
        },
        logicLabels: {
          behavior: 'Behavior',
          timing: 'Reward timing',
          engagement: 'Engagement'
        },
        overview: {
          title: 'Apps Overview & Navigation',
          note: 'Click a logo to open the app slide.',
          badges: { real: 'Real Cashback', promo: 'Promo Rewards' },
          headers: {
            app: 'App',
            type: 'Type',
            funding: 'Funding',
            timing: 'Benefit timing'
          },
          legend: {
            real: 'Real Cashback',
            promo: 'Promo Rewards',
            merchant: 'Merchant-funded',
            issuer: 'Issuer-funded',
            partner: 'Partner-funded',
            hybrid: 'Hybrid',
            instant: 'Instant',
            delayed: 'Delayed'
          }
        },
        regions: {
          morocco: 'Morocco',
          arab: 'Arab Region',
          africa: 'Africa',
          europe: 'Europe'
        }
      },
      fr: {
        labels: {
          positioning: 'Positionnement',
          mechanics: 'Mécanismes',
          business: 'Modèle économique',
          wins: 'Pourquoi ça marche',
          risks: 'Risques',
          website: 'Site web',
          getApp: 'Télécharger l’app',
          earn: 'Gain',
          timing: 'Moment du gain',
          funding: 'Source de financement',
          type: 'Type',
          model: 'Modèle de cashback',
          strengths: 'Forces',
          limits: 'Limites',
          why: 'Pourquoi c’est clé pour Missions',
          region: 'Région',
          rate: 'Taux de cashback'
        },
        ui: {
          deckTitle: 'Benchmark Cashback',
          deckSubtitle: 'Scan de marché par app',
          prev: 'Précédent',
          next: 'Suivant',
          fullscreen: 'Plein écran'
        },
        definition: {
          title: 'Ce que nous entendons par Cashback',
          leftTitle: 'Cashback réel',
          leftKeywords: ['Remboursement', 'Retirable'],
          leftBadge: 'Solde permanent',
          leftFlow: ['Dépense', 'Cashback', 'Portefeuille retirable'],
          leftBullets: [
            'Définition : l’utilisateur gagne de l’argent réel (solde récupérable).',
            'Source : généralement financé par les marchands (affiliation/partenaires).',
            'Suivi : achat validé (lien affilié / confirmation partenaire / carte liée).',
            'Rachat : retrait / portefeuille / virement bancaire.'
          ],
          rightTitle: 'Récompenses promo',
          rightKeywords: ['Bonus', 'Campagnes'],
          rightBadge: 'Récompenses temporaires',
          rightFlow: ['Action / dépense', 'Points / bonus', 'Bon / remise'],
          rightBullets: [
            'Définition : incitations de campagne (bonus, points, bons).',
            'Source : budgets promo émetteur/telco/marque.',
            'Suivi : souvent instantané dans l’app (règles).',
            'Rachat : points/bons/remises ; peut expirer ; pas toujours retirable.'
          ],
          keyRule: 'Solde d’argent retirable = Cashback réel. Points/bons à durée limitée = Récompenses promo.'
        },
        modelDescriptions: {
          real: 'Solde permanent et retirable',
          promo: 'Points/bonus liés aux campagnes'
        },
        defaults: {
          rate: 'Variable selon l’offre'
        },
        whyDefaults: {
          real: [
            'Valide l’intérêt pour un cashback retirable',
            'Montre la dépendance au financement marchand et aux délais'
          ],
          promo: [
            'Confirme que les campagnes activent vite',
            'Montre un engagement limité sans missions'
          ]
        },
        logicLabels: {
          behavior: 'Comportement',
          timing: 'Moment du gain',
          engagement: 'Engagement'
        },
        overview: {
          title: 'Aperçu des applications & navigation',
          note: 'Cliquez sur un logo pour accéder à la fiche de l’app.',
          badges: { real: 'Cashback réel', promo: 'Récompenses promo' },
          headers: {
            app: 'App',
            type: 'Type',
            funding: 'Financement',
            timing: 'Moment du gain'
          },
          legend: {
            real: 'Cashback réel',
            promo: 'Récompenses promo',
            merchant: 'Financé par marchands',
            issuer: 'Financé par émetteur',
            partner: 'Financé par partenaires',
            hybrid: 'Hybride',
            instant: 'Instantané',
            delayed: 'Différé'
          }
        },
        regions: {
          morocco: 'Maroc',
          arab: 'Région arabe',
          africa: 'Afrique',
          europe: 'Europe'
        }
      }
    };

    let currentLang = localStorage.getItem('deckLang') || 'en';
    if (!i18n[currentLang]) currentLang = 'en';

    const t = (value) => {
      if (value && typeof value === 'object') {
        return value[currentLang] || value.en || '';
      }
      return value || '';
    };

    const slideData = [
      {
        type: 'cover',
        title: { en: 'Cover', fr: 'Couverture' },
        coverTitle: 'Tomorrow Systems'
      },
      {
        type: 'definition',
        title: { en: 'What we mean by Cashback', fr: 'Ce que nous entendons par Cashback' }
      },
      {
        type: 'app',
        name: 'Kenzup',
        region: 'morocco',
        regionLabel: { en: 'Morocco', fr: 'Maroc' },
        cashbackRate: { en: '1 point = 1 Dh (value); rate varies by partner', fr: '1 point = 1 Dh (valeur) ; taux variable selon partenaire' },
        cashbackType: 'real',
        snapshot: {
          earn: { en: 'Spend at partner merchants', fr: 'Dépense chez marchands partenaires' },
          timing: { en: 'Delayed confirmation & cash-out', fr: 'Confirmation & retrait différés' },
          timingTag: { en: 'Delayed', fr: 'Différé' },
          timingType: 'delayed',
          funding: { en: 'Merchant-funded cashback', fr: 'Cashback financé par marchands' },
          fundingTag: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingType: 'merchant'
        },
        logo: 'assets/apps/kenzup.svg',
        website: 'https://www.kenzup.com/',
        store: 'https://play.google.com/store/apps/details?id=com.kenzup.app.prod',
        positioning: {
          en: 'What it is: Cashback wallet (real cashback)',
          fr: 'Ce que c’est : portefeuille cashback (cashback réel)'
        },
        mechanics: [
          { en: 'Earn: merchant-funded cashback at partner merchants', fr: 'Gain : cashback financé par les marchands chez partenaires' },
          { en: 'Tracking: in-app partner validation, confirmed after purchase', fr: 'Suivi : validation partenaire dans l’app, confirmé après achat' },
          { en: 'Redemption: withdrawable balance, delayed', fr: 'Rachat : solde retirable, différé' }
        ],
        business: [
          { en: 'Funding: merchant-funded', fr: 'Financement : marchands' },
          { en: 'Revenue: partner fees and merchant commissions', fr: 'Revenus : frais partenaires et commissions marchands' },
          { en: 'Constraints: partner density and payout cost', fr: 'Contraintes : densité partenaires et coût des paiements' }
        ],
        strengths: [
          { en: 'Distribution: strong local merchant network', fr: 'Distribution : réseau local de marchands solide' },
          { en: 'UX: visible balance and clear cash-out', fr: 'UX : solde visible et retrait clair' }
        ],
        limits: [
          { en: 'Scale depends on partner coverage', fr: 'L’échelle dépend de la couverture partenaires' },
          { en: 'Possible tracking disputes with merchants', fr: 'Litiges de suivi possibles avec les marchands' }
        ],
        why: [
          { en: 'Confirms user demand for withdrawable cashback', fr: 'Confirme la demande pour un cashback retirable' },
          { en: 'Highlights merchant-funded model + confirmation delays', fr: 'Met en évidence le modèle marchand + délais de confirmation' }
        ],
        wins: [
          { en: 'Distribution: local merchant network', fr: 'Distribution : réseau de marchands locaux' },
          { en: 'UX: visible balance and cash-out', fr: 'UX : solde visible et retrait' }
        ],
        risks: [
          { en: 'Scale depends on partner coverage', fr: 'Échelle dépend de la couverture partenaires' },
          { en: 'Tracking disputes with merchants', fr: 'Litiges de suivi avec les marchands' }
        ]
      },
      {
        type: 'app',
        name: 'inwi money',
        region: 'morocco',
        regionLabel: { en: 'Morocco', fr: 'Maroc' },
        cashbackRate: { en: 'Campaign-based offers (variable)', fr: 'Offres par campagne (variable)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Bill pay & partner offers', fr: 'Factures & offres partenaires' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/inwi-money.png',
        website: 'https://inwimoney.ma/fr/application-mobile',
        store: 'https://play.google.com/store/apps/details?id=ma.inwi.money',
        positioning: {
          en: 'What it is: Wallet (promo rewards)',
          fr: 'Ce que c’est : portefeuille (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: bill-pay promos and partner offers', fr: 'Gain : promos sur factures et offres partenaires' },
          { en: 'Tracking: wallet ledger, confirmed instantly', fr: 'Suivi : ledger portefeuille, confirmé instantanément' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits portefeuille, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos financées par l’émetteur' },
          { en: 'Revenue: interchange and partner fees', fr: 'Revenus : interchange et frais partenaires' },
          { en: 'Constraints: promo budget sustainability', fr: 'Contraintes : soutenabilité du budget promo' }
        ],
        wins: [
          { en: 'Distribution: telco base', fr: 'Distribution : base télécom' },
          { en: 'UX: low-friction bill pay', fr: 'UX : paiement de factures fluide' }
        ],
        risks: [
          { en: 'Campaign dependency', fr: 'Dépendance aux campagnes' },
          { en: 'Incentive regulation limits', fr: 'Limites réglementaires sur les incitations' }
        ]
      },
      {
        type: 'app',
        name: 'Orange Money Maroc',
        region: 'morocco',
        regionLabel: { en: 'Morocco', fr: 'Maroc' },
        cashbackRate: { en: 'Up to 10% on recharges/bills (promo)', fr: 'Jusqu’à 10% sur recharges/factures (promo)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Bills & merchant offers', fr: 'Factures & offres marchands' },
          timing: { en: 'Near-instant wallet credit', fr: 'Crédit wallet quasi instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/orange-money.png',
        website: 'https://www.orange.ma/orangemoney',
        store: 'https://play.google.com/store/apps/details?id=com.orange.orangemoney',
        positioning: {
          en: 'What it is: Wallet (promo rewards)',
          fr: 'Ce que c’est : portefeuille (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: promos on bill pay and merchant spend', fr: 'Gain : promos sur factures et achats marchands' },
          { en: 'Tracking: wallet ledger, near-instant', fr: 'Suivi : ledger portefeuille, quasi instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits portefeuille, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos financées par l’émetteur' },
          { en: 'Revenue: interchange and partner fees', fr: 'Revenus : interchange et frais partenaires' },
          { en: 'Constraints: promo budget and offer depth', fr: 'Contraintes : budget promo et profondeur d’offre' }
        ],
        wins: [
          { en: 'Distribution: telco reach', fr: 'Distribution : portée télécom' },
          { en: 'UX: everyday payment utility', fr: 'UX : utilité pour paiements quotidiens' }
        ],
        risks: [
          { en: 'Offer fatigue over time', fr: 'Usure des offres avec le temps' },
          { en: 'Campaign dependency', fr: 'Dépendance aux campagnes' }
        ]
      },
      {
        type: 'app',
        name: 'MT Cash',
        region: 'morocco',
        regionLabel: { en: 'Morocco', fr: 'Maroc' },
        cashbackRate: { en: 'Campaign-based offers (variable)', fr: 'Offres par campagne (variable)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Transfers & merchant promos', fr: 'Transferts & promos marchands' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/mt-cash.png',
        website: 'https://www.mtcash.ma/',
        store: 'https://play.google.com/store/apps/details?id=ma.iam.mtcash',
        positioning: {
          en: 'What it is: Wallet (promo rewards)',
          fr: 'Ce que c’est : portefeuille (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: telco promos on transfers and merchants', fr: 'Gain : promos télécom sur transferts et marchands' },
          { en: 'Tracking: wallet ledger, instant', fr: 'Suivi : ledger portefeuille, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits portefeuille, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos émetteur' },
          { en: 'Revenue: interchange and transaction fees', fr: 'Revenus : interchange et frais de transaction' },
          { en: 'Constraints: promo budget and seasonality', fr: 'Contraintes : budget promo et saisonnalité' }
        ],
        wins: [
          { en: 'Distribution: telco retail footprint', fr: 'Distribution : réseau retail télécom' },
          { en: 'UX: simple wallet flow', fr: 'UX : parcours wallet simple' }
        ],
        risks: [
          { en: 'Seasonal promo cycles', fr: 'Cycles promo saisonniers' },
          { en: 'Price-sensitive users', fr: 'Utilisateurs sensibles au prix' }
        ]
      },
      {
        type: 'app',
        name: 'stc pay',
        region: 'arab',
        regionLabel: { en: 'Saudi Arabia', fr: 'Arabie saoudite' },
        cashbackRate: { en: 'Campaign-based offers (variable)', fr: 'Offres par campagne (variable)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Bill pay & merchant offers', fr: 'Factures & offres marchands' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/stc-pay.png',
        website: 'https://stcbank.com.sa/',
        store: 'https://play.google.com/store/apps/details?id=sa.com.stcpay',
        positioning: {
          en: 'What it is: Wallet (promo rewards)',
          fr: 'Ce que c’est : portefeuille (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: bill-pay promos and merchant offers', fr: 'Gain : promos sur factures et offres marchands' },
          { en: 'Tracking: wallet ledger, instant', fr: 'Suivi : ledger portefeuille, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits portefeuille, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos émetteur' },
          { en: 'Revenue: interchange and partner fees', fr: 'Revenus : interchange et frais partenaires' },
          { en: 'Constraints: promo budget discipline', fr: 'Contraintes : discipline budgétaire promo' }
        ],
        wins: [
          { en: 'Distribution: telco + bank base', fr: 'Distribution : base télécom + banque' },
          { en: 'UX: utility payments in one app', fr: 'UX : paiements utiles dans une seule app' }
        ],
        risks: [
          { en: 'Campaign dependency', fr: 'Dépendance aux campagnes' },
          { en: 'Regulatory constraints on incentives', fr: 'Contraintes réglementaires sur les incitations' }
        ]
      },
      {
        type: 'app',
        name: 'Careem Pay',
        region: 'arab',
        regionLabel: { en: 'United Arab Emirates', fr: 'Émirats arabes unis' },
        cashbackRate: { en: 'Rewards credits vary by offer', fr: 'Crédits/récompenses variables selon offre' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Rides, food & partners', fr: 'Courses, repas & partenaires' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Hybrid (partner + platform)', fr: 'Hybride (partenaires + plateforme)' },
          fundingTag: { en: 'Hybrid', fr: 'Hybride' },
          fundingType: 'hybrid'
        },
        logo: 'assets/apps/careem.png',
        website: 'https://www.careem.com/en-AE/pay/',
        store: 'https://play.google.com/store/search?q=Careem&c=apps',
        positioning: {
          en: 'What it is: Super-app wallet (promo rewards)',
          fr: 'Ce que c’est : super-app wallet (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: rewards on rides, food, partners', fr: 'Gain : récompenses sur rides, food, partenaires' },
          { en: 'Tracking: in-app transactions, instant', fr: 'Suivi : transactions in-app, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits wallet, instantané' }
        ],
        business: [
          { en: 'Funding: hybrid (partner + platform)', fr: 'Financement : hybride (partenaires + plateforme)' },
          { en: 'Revenue: commissions, interchange, partner fees', fr: 'Revenus : commissions, interchange, frais partenaires' },
          { en: 'Constraints: subsidy cost at scale', fr: 'Contraintes : coût des subventions ? l’échelle' }
        ],
        wins: [
          { en: 'Distribution: super-app frequency', fr: 'Distribution : fréquence super-app' },
          { en: 'UX: rewards embedded in daily use', fr: 'UX : récompenses intégrées au quotidien' }
        ],
        risks: [
          { en: 'Promo cost pressure', fr: 'Pression sur les coûts promo' },
          { en: 'Margin sensitivity', fr: 'Sensibilité des marges' }
        ]
      },
      {
        type: 'app',
        name: 'Smiles',
        region: 'arab',
        regionLabel: { en: 'United Arab Emirates', fr: 'Émirats arabes unis' },
        cashbackRate: { en: '1-10 points per AED (tiered)', fr: '1-10 points par AED (selon niveau)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Points at partner merchants', fr: 'Points chez partenaires' },
          timing: { en: 'Delayed confirmation', fr: 'Confirmation différée' },
          timingTag: { en: 'Delayed', fr: 'Différé' },
          timingType: 'delayed',
          funding: { en: 'Partner-funded rewards', fr: 'Récompenses financées par partenaires' },
          fundingTag: { en: 'Partner-funded', fr: 'Financé par partenaires' },
          fundingType: 'partner'
        },
        logo: 'assets/apps/smiles.png',
        website: 'https://smiles.ae/en/index.html',
        store: 'https://play.google.com/store/apps/details?id=ae.etisalat.smiles',
        positioning: {
          en: 'What it is: Rewards super-app (promo rewards)',
          fr: 'Ce que c’est : super-app de récompenses (promo)'
        },
        mechanics: [
          { en: 'Earn: points or cashback at partner merchants', fr: 'Gain : points ou cashback chez partenaires' },
          { en: 'Tracking: partner integrations, often delayed', fr: 'Suivi : intégrations partenaires, souvent différé' },
          { en: 'Redemption: points or vouchers, delayed', fr: 'Rachat : points ou bons, différé' }
        ],
        business: [
          { en: 'Funding: partner-funded rewards', fr: 'Financement : récompenses financées par partenaires' },
          { en: 'Revenue: partner fees and merchant promos', fr: 'Revenus : frais partenaires et promos marchands' },
          { en: 'Constraints: reward liability management', fr: 'Contraintes : gestion du passif de points' }
        ],
        wins: [
          { en: 'Distribution: large partner network', fr: 'Distribution : large réseau partenaires' },
          { en: 'UX: multi-category rewards hub', fr: 'UX : hub récompenses multi-catégories' }
        ],
        risks: [
          { en: 'Points are not cash', fr: 'Points ? cash' },
          { en: 'Redemption complexity', fr: 'Complexité de la rédemption' }
        ]
      },
      {
        type: 'app',
        name: 'Vodafone Cash',
        region: 'arab',
        regionLabel: { en: 'Egypt', fr: 'Égypte' },
        cashbackRate: { en: 'Up to 20% cashback (promo, capped)', fr: 'Jusqu’à 20% cashback (promo, plafonné)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Bill pay & merchant offers', fr: 'Factures & offres marchands' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/vodafone-cash.png',
        website: 'https://web.vodafone.com.eg/en/vodafone-cash',
        store: 'https://play.google.com/store/search?q=Vodafone%20Cash&c=apps',
        positioning: {
          en: 'What it is: Wallet (promo rewards)',
          fr: 'Ce que c’est : portefeuille (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: bill-pay promos and merchant offers', fr: 'Gain : promos factures et offres marchands' },
          { en: 'Tracking: wallet ledger, instant', fr: 'Suivi : ledger portefeuille, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits portefeuille, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos émetteur' },
          { en: 'Revenue: interchange and transaction fees', fr: 'Revenus : interchange et frais de transaction' },
          { en: 'Constraints: promo budget and fraud risk', fr: 'Contraintes : budget promo et risque fraude' }
        ],
        wins: [
          { en: 'Distribution: telco user base', fr: 'Distribution : base clients télécom' },
          { en: 'UX: simple wallet redemption', fr: 'UX : rédemption wallet simple' }
        ],
        risks: [
          { en: 'Campaign dependency', fr: 'Dépendance aux campagnes' },
          { en: 'Fraud and chargeback risk', fr: 'Risque fraude et rétrofacturation' }
        ]
      },
      {
        type: 'app',
        name: 'M-Pesa',
        region: 'africa',
        regionLabel: { en: 'Kenya', fr: 'Kenya' },
        cashbackRate: { en: 'Campaign-based offers (variable)', fr: 'Offres par campagne (variable)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Bill pay & merchant pay', fr: 'Factures & paiements marchands' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/mpesa.png',
        website: 'https://www.safaricom.co.ke/',
        store: 'https://play.google.com/store/apps/details?id=com.safaricom.mpesa.lifestyle',
        positioning: {
          en: 'What it is: Wallet ecosystem (promo rewards)',
          fr: 'Ce que c’est : écosystème wallet (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: promos on bill pay and merchant pay', fr: 'Gain : promos sur factures et paiements marchands' },
          { en: 'Tracking: wallet ledger, instant', fr: 'Suivi : ledger wallet, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits wallet, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos émetteur' },
          { en: 'Revenue: transaction fees and interchange', fr: 'Revenus : frais de transaction et interchange' },
          { en: 'Constraints: regulatory limits and promo cost', fr: 'Contraintes : limites réglementaires et coût promo' }
        ],
        wins: [
          { en: 'Distribution: ubiquitous agent network', fr: 'Distribution : réseau d’agents ubiquitaire' },
          { en: 'UX: everyday payment habit', fr: 'UX : habitudes de paiement quotidiennes' }
        ],
        risks: [
          { en: 'Regulatory changes', fr: 'Changements réglementaires' },
          { en: 'Campaign dependency', fr: 'Dépendance aux campagnes' }
        ]
      },
      {
        type: 'app',
        name: 'OPay',
        region: 'africa',
        regionLabel: { en: 'Nigeria', fr: 'Nigeria' },
        cashbackRate: { en: 'Campaign-based offers (variable)', fr: 'Offres par campagne (variable)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Bills, transfers & merchants', fr: 'Factures, transferts & marchands' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/opay.png',
        website: 'https://www.opay.ng/',
        store: 'https://play.google.com/store/apps/details?id=team.opay.pay',
        positioning: {
          en: 'What it is: Wallet (promo rewards)',
          fr: 'Ce que c’est : portefeuille (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: promos on bills, transfers, merchants', fr: 'Gain : promos sur factures, transferts, marchands' },
          { en: 'Tracking: in-app ledger, instant', fr: 'Suivi : ledger in-app, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits wallet, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos émetteur' },
          { en: 'Revenue: interchange and service fees', fr: 'Revenus : interchange et frais de service' },
          { en: 'Constraints: promo cost pressure', fr: 'Contraintes : pression sur coûts promo' }
        ],
        wins: [
          { en: 'Distribution: aggressive user acquisition', fr: 'Distribution : acquisition utilisateurs agressive' },
          { en: 'UX: fast, mobile-first payments', fr: 'UX : paiements rapides mobile-first' }
        ],
        risks: [
          { en: 'Campaign dependency', fr: 'Dépendance aux campagnes' },
          { en: 'Fraud and abuse', fr: 'Fraude et abus' }
        ]
      },
      {
        type: 'app',
        name: 'PalmPay',
        region: 'africa',
        regionLabel: { en: 'Nigeria', fr: 'Nigeria' },
        cashbackRate: { en: 'Campaign-based offers (variable)', fr: 'Offres par campagne (variable)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Bills & in-app pay', fr: 'Factures & paiements in-app' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/palmpay.png',
        website: 'https://www.palmpay.com/',
        store: 'https://play.google.com/store/apps/details?id=com.transsnet.palmpay',
        positioning: {
          en: 'What it is: Wallet (promo rewards)',
          fr: 'Ce que c’est : portefeuille (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: promos on bills and in-app pay', fr: 'Gain : promos sur factures et paiements in-app' },
          { en: 'Tracking: wallet ledger, instant', fr: 'Suivi : ledger wallet, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits wallet, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos émetteur' },
          { en: 'Revenue: interchange and partner fees', fr: 'Revenus : interchange et frais partenaires' },
          { en: 'Constraints: offer funding variability', fr: 'Contraintes : variabilité du financement des offres' }
        ],
        wins: [
          { en: 'Distribution: strong retail agent presence', fr: 'Distribution : forte présence d’agents retail' },
          { en: 'UX: simple daily payment flow', fr: 'UX : parcours de paiement quotidien simple' }
        ],
        risks: [
          { en: 'Campaign dependency', fr: 'Dépendance aux campagnes' },
          { en: 'Payout cost volatility', fr: 'Volatilité du coût des paiements' }
        ]
      },
      {
        type: 'app',
        name: 'Airtel Money',
        region: 'africa',
        regionLabel: { en: 'Africa (14 markets)', fr: 'Afrique (14 marchés)' },
        regionDetail: {
          en: 'Chad, Congo-Brazzaville, DR Congo, Gabon, Kenya, Madagascar, Malawi, Niger, Nigeria, Rwanda, Seychelles, Tanzania, Uganda, Zambia',
          fr: 'Tchad, Congo-Brazzaville, RD Congo, Gabon, Kenya, Madagascar, Malawi, Niger, Nigeria, Rwanda, Seychelles, Tanzanie, Ouganda, Zambie'
        },
        cashbackRate: { en: 'Campaign-based offers (variable)', fr: 'Offres par campagne (variable)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Airtime & bill promos', fr: 'Airtime & promos factures' },
          timing: { en: 'Instant wallet credit', fr: 'Crédit wallet instantané' },
          timingTag: { en: 'Instant', fr: 'Instantané' },
          timingType: 'instant',
          funding: { en: 'Issuer-funded promos', fr: 'Promos financées par l’émetteur' },
          fundingTag: { en: 'Issuer-funded', fr: 'Financé par émetteur' },
          fundingType: 'issuer'
        },
        logo: 'assets/apps/airtel-money.svg',
        website: 'https://www.airtel.africa/',
        store: 'https://play.google.com/store/search?q=Airtel%20Money&c=apps',
        positioning: {
          en: 'What it is: Telco wallet (promo rewards)',
          fr: 'Ce que c’est : wallet télécom (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: promos on airtime and bills', fr: 'Gain : promos sur airtime et factures' },
          { en: 'Tracking: wallet ledger, instant', fr: 'Suivi : ledger wallet, instantané' },
          { en: 'Redemption: wallet credits, instant', fr: 'Rachat : crédits wallet, instantané' }
        ],
        business: [
          { en: 'Funding: issuer-funded promos', fr: 'Financement : promos émetteur' },
          { en: 'Revenue: transaction fees and interchange', fr: 'Revenus : frais de transaction et interchange' },
          { en: 'Constraints: promo budget and seasonality', fr: 'Contraintes : budget promo et saisonnalité' }
        ],
        wins: [
          { en: 'Distribution: telco reach across markets', fr: 'Distribution : portée télécom multi-pays' },
          { en: 'UX: familiar telco wallet', fr: 'UX : wallet télécom familier' }
        ],
        risks: [
          { en: 'Seasonal promo cycles', fr: 'Cycles promo saisonniers' },
          { en: 'Regulatory variation by market', fr: 'Variations réglementaires selon pays' }
        ]
      },
      {
        type: 'app',
        name: 'Revolut',
        region: 'europe',
        regionLabel: { en: 'UK / EEA (global reference)', fr: 'R.-U. / EEE (référence globale)' },
        cashbackRate: { en: 'Up to 1% (Revolut Pro card)', fr: 'Jusqu’à 1% (carte Revolut Pro)' },
        cashbackType: 'real',
        snapshot: {
          earn: { en: 'Card-linked partner offers', fr: 'Offres partenaires liées à la carte' },
          timing: { en: 'Delayed after merchant confirmation', fr: 'Différé après confirmation marchand' },
          timingTag: { en: 'Delayed', fr: 'Différé' },
          timingType: 'delayed',
          funding: { en: 'Merchant-funded + interchange', fr: 'Marchands + interchange' },
          fundingTag: { en: 'Hybrid', fr: 'Hybride' },
          fundingType: 'hybrid'
        },
        logo: 'assets/apps/revolut.png',
        website: 'https://www.revolut.com/',
        positioning: {
          en: 'What it is: Global reference for card-linked cashback (benchmark, not a local competitor)',
          fr: 'Ce que c’est : référence globale du cashback lié à la carte (benchmark, pas un concurrent local)'
        },
        mechanics: [
          { en: 'Earn: card-linked cashback on partner offers', fr: 'Gain : cashback lié à la carte sur offres partenaires' },
          { en: 'Tracking: card-linked offer validation after merchant confirmation', fr: 'Suivi : validation des offres liées à la carte après confirmation marchand' },
          { en: 'Redemption: real, withdrawable balance', fr: 'Rachat : solde réel et retirable' }
        ],
        business: [
          { en: 'Funding: merchant-funded offers + interchange', fr: 'Financement : offres financées par marchands + interchange' },
          { en: 'Revenue: interchange and partner marketing fees', fr: 'Revenus : interchange et frais marketing partenaires' },
          { en: 'Constraints: offer depth depends on partner coverage', fr: 'Contraintes : profondeur des offres dépend de la couverture partenaires' }
        ],
        wins: [
          { en: 'Benchmark: card-linked offers at scale', fr: 'Référence : offres liées à la carte à grande échelle' },
          { en: 'UX: cashback appears as cash balance', fr: 'UX : cashback visible comme solde cash' }
        ],
        risks: [
          { en: 'Interchange caps can limit funding', fr: 'Plafonds d’interchange peuvent limiter le financement' },
          { en: 'Offer availability varies by market', fr: 'Disponibilité des offres varie selon les marchés' }
        ]
      },
      {
        type: 'app',
        name: 'TopCashback',
        region: 'europe',
        regionLabel: { en: 'United Kingdom', fr: 'Royaume-Uni' },
        cashbackRate: { en: 'Varies by retailer (offer %)', fr: 'Variable selon le marchand (taux offre)' },
        cashbackType: 'real',
        snapshot: {
          earn: { en: 'Affiliate retailer spend', fr: 'Dépense marchands affiliés' },
          timing: { en: 'Delayed confirmation', fr: 'Confirmation différée' },
          timingTag: { en: 'Delayed', fr: 'Différé' },
          timingType: 'delayed',
          funding: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingTag: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingType: 'merchant'
        },
        logo: 'assets/apps/topcashback.png',
        website: 'https://www.topcashback.co.uk/',
        store: 'https://play.google.com/store/apps/details?id=com.topcashback.topcashback',
        positioning: {
          en: 'What it is: Cashback portal (real cashback)',
          fr: 'Ce que c’est : portail cashback (cashback réel)'
        },
        mechanics: [
          { en: 'Earn: affiliate link cashback from retailers', fr: 'Gain : cashback via liens affiliés des marchands' },
          { en: 'Tracking: cookie/affiliate tracking, delayed confirmation', fr: 'Suivi : cookies/affiliation, confirmation différée' },
          { en: 'Redemption: cash-out, delayed', fr: 'Rachat : retrait, différé' }
        ],
        business: [
          { en: 'Funding: merchant-funded', fr: 'Financement : marchands' },
          { en: 'Revenue: affiliate commissions', fr: 'Revenus : commissions d’affiliation' },
          { en: 'Constraints: tracking disputes and payout delays', fr: 'Contraintes : litiges de suivi et délais de paiement' }
        ],
        wins: [
          { en: 'Distribution: broad retailer coverage', fr: 'Distribution : large couverture marchands' },
          { en: 'UX: clear cash-out structure', fr: 'UX : structure de retrait claire' }
        ],
        risks: [
          { en: 'Tracking accuracy risk', fr: 'Risque d’exactitude du tracking' },
          { en: 'Delayed confirmations', fr: 'Confirmations différées' }
        ]
      },
      {
        type: 'app',
        name: 'iGraal',
        region: 'europe',
        regionLabel: { en: 'France', fr: 'France' },
        cashbackRate: { en: 'Up to 30% cashback', fr: 'Jusqu’à 30% de cashback' },
        cashbackType: 'real',
        snapshot: {
          earn: { en: 'Affiliate spend via app', fr: 'Dépense via app affiliée' },
          timing: { en: 'Delayed confirmation', fr: 'Confirmation différée' },
          timingTag: { en: 'Delayed', fr: 'Différé' },
          timingType: 'delayed',
          funding: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingTag: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingType: 'merchant'
        },
        logo: 'assets/apps/igraal.png',
        website: 'https://www.igraal.com/',
        store: 'https://play.google.com/store/apps/details?id=fr.snapp.igraal',
        positioning: {
          en: 'What it is: Cashback portal (real cashback)',
          fr: 'Ce que c’est : portail cashback (cashback réel)'
        },
        mechanics: [
          { en: 'Earn: affiliate link cashback via app/extension', fr: 'Gain : cashback via liens affiliés app/extension' },
          { en: 'Tracking: cookie/affiliate tracking, delayed confirmation', fr: 'Suivi : cookies/affiliation, confirmation différée' },
          { en: 'Redemption: cash-out, delayed', fr: 'Rachat : retrait, différé' }
        ],
        business: [
          { en: 'Funding: merchant-funded', fr: 'Financement : marchands' },
          { en: 'Revenue: affiliate commissions', fr: 'Revenus : commissions d’affiliation' },
          { en: 'Constraints: payout delays and disputes', fr: 'Contraintes : délais de paiement et litiges' }
        ],
        wins: [
          { en: 'Distribution: retailer density in EU', fr: 'Distribution : densité marchands en UE' },
          { en: 'UX: simple activation flow', fr: 'UX : activation simple' }
        ],
        risks: [
          { en: 'Tracking disputes', fr: 'Litiges de suivi' },
          { en: 'Delayed payouts', fr: 'Paiements différés' }
        ]
      },
      {
        type: 'app',
        name: 'PAYBACK',
        region: 'europe',
        regionLabel: { en: 'Germany', fr: 'Allemagne' },
        cashbackRate: { en: '1 point per €2 (1 point = €0.01)', fr: '1 point par 2 € (1 point = 0,01 €)' },
        cashbackType: 'promo',
        snapshot: {
          earn: { en: 'Points at partner merchants', fr: 'Points chez partenaires' },
          timing: { en: 'Delayed points credit', fr: 'Crédit de points différé' },
          timingTag: { en: 'Delayed', fr: 'Différé' },
          timingType: 'delayed',
          funding: { en: 'Merchant-funded points', fr: 'Points financés par marchands' },
          fundingTag: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingType: 'merchant'
        },
        logo: 'assets/apps/payback.png',
        website: 'https://www.payback.de/',
        store: 'https://play.google.com/store/apps/details?id=at.payback.client.android',
        positioning: {
          en: 'What it is: Coalition loyalty (promo rewards)',
          fr: 'Ce que c’est : coalition de fidélité (récompenses promo)'
        },
        mechanics: [
          { en: 'Earn: points at partner merchants', fr: 'Gain : points chez partenaires' },
          { en: 'Tracking: card or ID at POS, delayed', fr: 'Suivi : carte ou ID en caisse, différé' },
          { en: 'Redemption: points or vouchers, delayed', fr: 'Rachat : points ou bons, différé' }
        ],
        business: [
          { en: 'Funding: merchant-funded points', fr: 'Financement : points financés par marchands' },
          { en: 'Revenue: partner fees and data services', fr: 'Revenus : frais partenaires et services data' },
          { en: 'Constraints: reward liability and breakage', fr: 'Contraintes : passif de points et breakage' }
        ],
        wins: [
          { en: 'Distribution: large coalition network', fr: 'Distribution : large réseau de coalition' },
          { en: 'UX: multi-merchant earn', fr: 'UX : gains multi-marchands' }
        ],
        risks: [
          { en: 'Points are not cash', fr: 'Points ? cash' },
          { en: 'Complex partner rules', fr: 'Règles partenaires complexes' }
        ]
      },
      {
        type: 'app',
        name: 'myWorld / Cashback World',
        region: 'europe',
        regionLabel: { en: 'Austria (global network)', fr: 'Autriche (réseau mondial)' },
        cashbackRate: { en: 'Up to 5% cashback + Shopping Points', fr: 'Jusqu’à 5% cashback + points d’achat' },
        cashbackType: 'real',
        snapshot: {
          earn: { en: 'Spend online/offline partners', fr: 'Dépense partenaires online/offline' },
          timing: { en: 'Delayed confirmation', fr: 'Confirmation différée' },
          timingTag: { en: 'Delayed', fr: 'Différé' },
          timingType: 'delayed',
          funding: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingTag: { en: 'Merchant-funded', fr: 'Financé par marchands' },
          fundingType: 'merchant'
        },
        logo: 'assets/apps/cashback-world.png',
        website: 'https://www.myworld-app.com/',
        store: 'https://play.google.com/store/search?q=myWorld%20cashback&c=apps',
        positioning: {
          en: 'What it is: Cashback network (real cashback)',
          fr: 'Ce que c’est : réseau cashback (cashback réel)'
        },
        mechanics: [
          { en: 'Earn: cashback at partner merchants online/offline', fr: 'Gain : cashback chez partenaires online/offline' },
          { en: 'Tracking: app scan or member ID, delayed', fr: 'Suivi : scan app ou ID membre, différé' },
          { en: 'Redemption: cash-out or vouchers, delayed', fr: 'Rachat : retrait ou bons, différé' }
        ],
        business: [
          { en: 'Funding: merchant-funded', fr: 'Financement : marchands' },
          { en: 'Revenue: partner fees and network commissions', fr: 'Revenus : frais partenaires et commissions réseau' },
          { en: 'Constraints: acceptance consistency', fr: 'Contraintes : constance d’acceptation' }
        ],
        wins: [
          { en: 'Distribution: online + offline partners', fr: 'Distribution : partenaires online + offline' },
          { en: 'UX: clear cashback balance', fr: 'UX : solde cashback clair' }
        ],
        risks: [
          { en: 'Inconsistent merchant acceptance', fr: 'Acceptation marchands inégale' },
          { en: 'Tracking disputes', fr: 'Litiges de suivi' }
        ]
      },
      {
        type: 'overview',
        title: { en: 'Apps Overview & Navigation', fr: 'Aperçu des applications & navigation' }
      },
      {
        type: 'logic',
        title: { en: 'Benchmark logic: Passive spend vs Missions', fr: 'Logique benchmark : dépense passive vs Missions' },
        left: {
          title: { en: 'Cashback apps (passive spend)', fr: 'Apps cashback (dépense passive)' },
          steps: [
            { en: 'Spend', fr: 'Dépense' },
            { en: 'Track & approve', fr: 'Suivi & validation' },
            { en: 'Cash-out (delayed)', fr: 'Retrait (différé)' }
          ],
          callout: { en: 'Reward follows spend → weak engagement loop', fr: 'Récompense après dépense → engagement limité' }
        },
        right: {
          title: { en: 'Missions (engagement-driven)', fr: 'Missions (engagement)' },
          steps: [
            { en: 'Complete action', fr: 'Action accomplie' },
            { en: 'Instant reward', fr: 'Récompense immédiate' },
            { en: 'Return & repeat', fr: 'Retour & répétition' }
          ],
          callout: { en: 'Action → reward → return builds habits', fr: 'Action → récompense → retour crée l’habitude' },
          loop: [
            { en: 'Action', fr: 'Action' },
            { en: 'Reward', fr: 'Récompense' },
            { en: 'Return', fr: 'Retour' }
          ]
        }
      },
      {
        type: 'vision',
        title: { en: 'From Cashback Apps → Missions Rewards Engine', fr: 'Des apps cashback → Missions Rewards Engine' },
        flow: [
          { en: 'Benchmark insights', fr: 'Insights du benchmark' },
          { en: 'Missions Rewards Engine', fr: 'Moteur de récompenses Missions' },
          { en: 'Habit loops', fr: 'Boucles d’habitudes' }
        ],
        left: {
          title: { en: 'Benchmark insights', fr: 'Enseignements du benchmark' },
          items: [
            { en: 'Rewards are tied to spend and often arrive later', fr: 'Les récompenses sont liées à la dépense et arrivent souvent plus tard' },
            { en: 'Engagement is mostly passive (browse, wait, redeem)', fr: 'L’engagement reste passif (parcourir, attendre, racheter)' },
            { en: 'Merchant-funded value is strong but not always sticky', fr: 'La valeur financée par les marchands est forte mais peu fidélisante' }
          ]
        },
        right: {
          title: { en: 'Missions product vision', fr: 'Vision produit Missions' },
          items: [
            { en: 'Missions turn rewards into actions and habits', fr: 'Les missions transforment les récompenses en actions et habitudes' },
            { en: 'Instant feedback: do a mission → earn immediately', fr: 'Retour immédiat : mission accomplie → gain immédiat' },
            { en: 'Engagement-led loops before spending', fr: 'Boucles d’engagement avant la dépense' }
          ]
        },
        highlight: { en: 'Engagement-driven rewards: missions/actions vs passive spend', fr: 'Récompenses par engagement : missions/actions vs dépense passive' }
      },
      {
        type: 'architecture',
        title: { en: 'High-Level Architecture ', fr: 'Architecture haut niveau ' },
        nodes: [
          { en: 'Missions App', fr: 'App Missions' },
          { en: 'Rewards Engine', fr: 'Moteur de récompenses' },
          { en: 'Cashback Logic', fr: 'Logique cashback' },
          { en: 'Wallet / Partners / Future Card', fr: 'Portefeuille / Partenaires / Future carte' }
        ],
        nodeSubs: [
          { en: 'User actions & missions', fr: 'Actions & missions utilisateur' },
          { en: 'Rules, scoring, rewards', fr: 'Règles, scoring, récompenses' },
          { en: 'Cashback rules & funding', fr: 'Règles cashback & financement' },
          { en: 'Payouts, partners, card', fr: 'Paiements, partenaires, carte' }
        ]
      },
      {
        type: 'roadmap',
        title: { en: 'Cashback Integration Roadmap', fr: 'Feuille de route intégration cashback' },
        phases: [
          {
            phase: { en: 'Phase 1', fr: 'Phase 1' },
            title: { en: 'Internal balance (points / rewards)', fr: 'Solde interne (points / récompenses)' },
            text: { en: 'Closed-loop balance to reward missions immediately', fr: 'Solde en circuit fermé pour récompenser les missions immédiatement' }
          },
          {
            phase: { en: 'Phase 2', fr: 'Phase 2' },
            title: { en: 'Merchant-funded cashback', fr: 'Cashback financé par les marchands' },
            text: { en: 'Partner programs funding cash rewards at scale', fr: 'Programmes partenaires finançant des récompenses cash à l’échelle' }
          },
          {
            phase: { en: 'Phase 3', fr: 'Phase 3' },
            title: { en: 'External wallet / card (Revolut-inspired)', fr: 'Portefeuille externe / carte (inspiré de Revolut)' },
            text: { en: 'Extend rewards into everyday payments', fr: 'Étendre les récompenses aux paiements du quotidien' }
          }
        ]
      },
      {
        type: 'role',
        title: { en: 'Role & Ownership', fr: 'Rôle & responsabilités' },
        roleTitle: { en: 'Architect & Project Manager', fr: 'Architecte & Chef de projet' },
        roleSummary: {
          en: 'Strategic ownership across product, architecture, and delivery',
          fr: 'Responsabilité stratégique produit, architecture et delivery'
        },
        highlights: [
          { icon: 'insight', label: { en: 'Market study', fr: 'Étude de marché' } },
          { icon: 'missions', label: { en: 'Product vision', fr: 'Vision produit' } },
          { icon: 'engine', label: { en: 'Architecture', fr: 'Architecture' } },
          { icon: 'card', label: { en: 'Roadmap', fr: 'Feuille de route' } },
          { icon: 'handshake', label: { en: 'Coordination', fr: 'Coordination' } }
        ],
        items: [
          { en: 'Market study & competitive benchmark', fr: 'Étude de marché & benchmark concurrentiel' },
          { en: 'Product vision & missions positioning', fr: 'Vision produit & positionnement des missions' },
          { en: 'High-level architecture & rewards flow', fr: 'Architecture haut niveau & flux de récompenses' },
          { en: 'Cashback roadmap & sequencing', fr: 'Feuille de route cashback & séquencement' },
          { en: 'Coordination across teams and partners', fr: 'Coordination des équipes et partenaires' }
        ]
      },
      {
        type: 'missions',
        title: { en: 'Missions — The Core Idea', fr: 'Missions — L’idée centrale' },
        left: {
          title: { en: 'What is Missions?', fr: 'Qu’est-ce que Missions ?' },
          items: [
            { en: 'Explore a city map like Google Maps.', fr: 'Explorer une carte comme Google Maps.' },
            { en: 'Complete missions (visit places / do actions).', fr: 'Réaliser des missions (visiter des lieux / faire des actions).' },
            { en: 'Earn rewards instantly (points / discounts / partner gifts).', fr: 'Gagner des récompenses instantanées (points / réductions / cadeaux partenaires).' },
            { en: 'Missions can be done without login; login required to claim rewards.', fr: 'Missions possibles sans connexion ; connexion requise pour récupérer les cadeaux.' }
          ]
        },
        right: {
          title: { en: 'How rewards work (simple loop)', fr: 'Comment fonctionnent les récompenses (boucle simple)' },
          flow: [
            { en: 'Action', fr: 'Action' },
            { en: 'Validate', fr: 'Validation' },
            { en: 'Reward', fr: 'Récompense' },
            { en: 'Repeat', fr: 'Répéter' }
          ],
          callout: {
            en: 'This creates habits before spending (unlike classic cashback which rewards after spending).',
            fr: 'Ça crée l’habitude avant la dépense (contrairement au cashback classique qui récompense après la dépense).'
          }
        }
      }
    ];

    const watermark = '<img class="watermark" src="assets/Tomorrow_Systems_Logo.webp" alt="" aria-hidden="true" />';

    const renderCoverSlide = (slide, index, navTitle) => {
      return `
        <section class="slide cover" id="slide-${index + 1}" data-title="${navTitle}">
          <img class="cover-logo" src="assets/Tomorrow_Systems_Logo.webp" alt="Tomorrow Systems logo" />
          <h1 class="cover-title">${slide.coverTitle}</h1>
          ${watermark}
        </section>
      `;
    };

    const renderAgendaSlide = (slide, index, navTitle) => {
      const items = slide.items.map((item) => `<li>${t(item)}</li>`).join('');
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <ol class="agenda-list">${items}</ol>
          ${watermark}
        </section>
      `;
    };

    const renderDefinitionSlide = (slide, index, navTitle) => {
      const def = i18n[currentLang].definition;
      const leftKeywords = def.leftKeywords.map((item) => `<span>${item}</span>`).join('');
      const rightKeywords = def.rightKeywords.map((item) => `<span>${item}</span>`).join('');
      const leftBullets = def.leftBullets.map((item) => `<li>${item}</li>`).join('');
      const rightBullets = def.rightBullets.map((item) => `<li>${item}</li>`).join('');
      const leftFlow = def.leftFlow.map((item, idx) => `
        <span class="mini-pill real">${item}</span>${idx < def.leftFlow.length - 1 ? '<span class="mini-arrow">&rarr;</span>' : ''}
      `).join('');
      const rightFlow = def.rightFlow.map((item, idx) => `
        <span class="mini-pill promo">${item}</span>${idx < def.rightFlow.length - 1 ? '<span class="mini-arrow">&rarr;</span>' : ''}
      `).join('');
      return `
        <section class=\"slide app-slide\" id=\"slide-${index + 1}\" data-title=\"${navTitle}\">
          <h2>${t(slide.title)}</h2>
          <div class=\"cashback-diagram\">
            <div class=\"diagram-panel\">
              <div class=\"diagram-icon\" aria-hidden=\"true\">
                <svg width=\"72\" height=\"72\" viewBox=\"0 0 72 72\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\">
                  <rect x=\"10\" y=\"18\" width=\"52\" height=\"36\" rx=\"10\"></rect>
                  <path d=\"M10 30h52\"></path>
                  <path d=\"M22 38h12\"></path>
                  <path d=\"M46 46l8-8\"></path>
                  <path d=\"M54 38v8h-8\"></path>
                </svg>
              </div>
              <div class=\"diagram-title\">${def.leftTitle}</div>
              <div class=\"definition-badge real\">${def.leftBadge}</div>
              <div class=\"diagram-keywords\">${leftKeywords}</div>
              <div class=\"mini-flow\">${leftFlow}</div>
              <ul class=\"diagram-bullets\">${leftBullets}</ul>
            </div>
            <div class=\"diagram-panel promo\">
              <div class=\"diagram-icon\" aria-hidden=\"true\">
                <svg width=\"72\" height=\"72\" viewBox=\"0 0 72 72\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\">
                  <path d=\"M14 26a6 6 0 0 0 0 12v14a6 6 0 0 0 6 6h32a6 6 0 0 0 6-6V38a6 6 0 1 0 0-12\"></path>
                  <path d=\"M30 26v32\"></path>
                  <path d=\"M36 20l4 8 9 1-6.5 6 1.5 9-8-4-8 4 1.5-9L23 29l9-1 4-8z\"></path>
                </svg>
              </div>
              <div class=\"diagram-title\">${def.rightTitle}</div>
              <div class=\"definition-badge promo\">${def.rightBadge}</div>
              <div class=\"diagram-keywords\">${rightKeywords}</div>
              <div class=\"mini-flow\">${rightFlow}</div>
              <ul class=\"diagram-bullets\">${rightBullets}</ul>
            </div>
          </div>
          ${watermark}
        </section>
      `;
    };

    const iconSet = {
      earn: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"></circle><circle cx="12" cy="12" r="3"></circle></svg>',
      instant: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L4 14h6l-1 8 9-12h-6l1-8z"></path></svg>',
      delayed: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 7v5l3 2"></path></svg>',
      merchant: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9h18l-2-5H5l-2 5z"></path><path d="M4 9v10h16V9"></path><path d="M9 19v-6h6v6"></path></svg>',
      issuer: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 10l9-6 9 6"></path><path d="M4 10v9h16v-9"></path><path d="M8 19v-6"></path><path d="M12 19v-6"></path><path d="M16 19v-6"></path></svg>',
      partner: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 1 0-7l2-2a5 5 0 0 1 7 7l-1 1"></path><path d="M14 11a5 5 0 0 1 0 7l-2 2a5 5 0 0 1-7-7l1-1"></path></svg>',
      hybrid: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="12" r="5"></circle><circle cx="15" cy="12" r="5"></circle></svg>',
      insight: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"></path><path d="M7 14l4-4 3 3 5-6"></path></svg>',
      missions: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 3h9l5 5v13H5z"></path><path d="M14 3v5h5"></path><path d="M8 13l2 2 4-4"></path></svg>',
      loop: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 0 1 15.5-6.4"></path><path d="M19 3v5h-5"></path><path d="M21 12a9 9 0 0 1-15.5 6.4"></path><path d="M5 21v-5h5"></path></svg>',
      app: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="7" y="2" width="10" height="20" rx="2"></rect><path d="M11 19h2"></path></svg>',
      engine: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.8 1.8 0 0 0 .4 2l.1.1a2 2 0 1 1-2.8 2.8l-.1-.1a1.8 1.8 0 0 0-2-.4 1.8 1.8 0 0 0-1 1.6V22a2 2 0 1 1-4 0v-.1a1.8 1.8 0 0 0-1-1.6 1.8 1.8 0 0 0-2 .4l-.1.1a2 2 0 1 1-2.8-2.8l.1-.1a1.8 1.8 0 0 0 .4-2 1.8 1.8 0 0 0-1.6-1H2a2 2 0 1 1 0-4h.1a1.8 1.8 0 0 0 1.6-1 1.8 1.8 0 0 0-.4-2l-.1-.1a2 2 0 1 1 2.8-2.8l.1.1a1.8 1.8 0 0 0 2 .4H9a1.8 1.8 0 0 0 1-1.6V2a2 2 0 1 1 4 0v.1a1.8 1.8 0 0 0 1 1.6 1.8 1.8 0 0 0 2-.4l.1-.1a2 2 0 1 1 2.8 2.8l-.1.1a1.8 1.8 0 0 0-.4 2V9a1.8 1.8 0 0 0 1.6 1H22a2 2 0 1 1 0 4h-.1a1.8 1.8 0 0 0-1.6 1z"></path></svg>',
      cashback: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="5" width="18" height="14" rx="2"></rect><path d="M7 9h4"></path><path d="M7 13h6"></path><circle cx="17" cy="12" r="2"></circle></svg>',
      wallet: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7h18a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H3z"></path><path d="M3 7V5a2 2 0 0 1 2-2h14"></path><circle cx="17" cy="12" r="1.5"></circle></svg>',
      points: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l2.5 5 5.5.8-4 3.9.9 5.6L12 15.9 7.1 17.3l.9-5.6-4-3.9L9.5 7z"></path></svg>',
      handshake: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 11l2-2a3 3 0 0 1 4 4l-5 5a4 4 0 0 1-6 0l-1-1"></path><path d="M8 13l-2 2a3 3 0 0 1-4-4l5-5a4 4 0 0 1 6 0l1 1"></path></svg>',
      card: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="5" width="18" height="14" rx="2"></rect><path d="M3 10h18"></path><path d="M7 15h4"></path></svg>',
      behavior: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"></circle><path d="M4 20a8 8 0 0 1 16 0"></path></svg>',
      leader: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4v16"></path><path d="M4 4h12l-2.5 4L16 12H4"></path></svg>'
    };

    const getTimingIcon = (type) => (type === 'instant' ? iconSet.instant : iconSet.delayed);
    const getFundingIcon = (type) => iconSet[type] || iconSet.merchant;

    const appTypeMap = {
      'Kenzup': { en: 'Cashback wallet', fr: 'Portefeuille cashback' },
      'inwi money': { en: 'Wallet', fr: 'Portefeuille' },
      'Orange Money Maroc': { en: 'Wallet', fr: 'Portefeuille' },
      'MT Cash': { en: 'Wallet', fr: 'Portefeuille' },
      'stc pay': { en: 'Wallet', fr: 'Portefeuille' },
      'Careem Pay': { en: 'Super-app wallet', fr: 'Portefeuille super-app' },
      'Smiles': { en: 'Rewards super-app', fr: 'Super-app de récompenses' },
      'Vodafone Cash': { en: 'Wallet', fr: 'Portefeuille' },
      'M-Pesa': { en: 'Wallet ecosystem', fr: 'Écosystème wallet' },
      'OPay': { en: 'Wallet', fr: 'Portefeuille' },
      'PalmPay': { en: 'Wallet', fr: 'Portefeuille' },
      'Airtel Money': { en: 'Telco wallet', fr: 'Portefeuille télécom' },
      'Revolut': { en: 'Neobank / card app', fr: 'Néobanque / app carte' },
      'TopCashback': { en: 'Cashback portal', fr: 'Portail cashback' },
      'iGraal': { en: 'Cashback portal', fr: 'Portail cashback' },
      'PAYBACK': { en: 'Coalition loyalty', fr: 'Coalition de fidélité' },
      'myWorld / Cashback World': { en: 'Cashback network', fr: 'Réseau cashback' }
    };

    const stripTypePrefix = (value) => {
      const text = value || '';
      return text
        .replace(/^What it is:\s*/i, '')
        .replace(/^Ce que c’est\s*:\s*/i, '')
        .trim();
    };

    const renderAppSlide = (slide, index, navTitle) => {
      const storeUrl = slide.store || slide.website;
      const labels = i18n[currentLang].labels;
      const regionLabel = slide.regionLabel ? t(slide.regionLabel) : i18n[currentLang].regions[slide.region];
      const regionStudy = slide.regionDetail ? t(slide.regionDetail) : regionLabel;
      const typeLine = stripTypePrefix(t(appTypeMap[slide.name] || slide.appType || slide.positioning));
      const modelTag = i18n[currentLang].overview.badges[slide.cashbackType] || '';
      const modelDescription = i18n[currentLang].modelDescriptions[slide.cashbackType] || '';
      const strengths = (slide.strengths || slide.wins || []).map((item) => `<li>${t(item)}</li>`).join('');
      const limits = (slide.limits || slide.risks || []).map((item) => `<li>${t(item)}</li>`).join('');
      const whyItems = (slide.why || i18n[currentLang].whyDefaults[slide.cashbackType] || [])
        .map((item) => `<li>${t(item)}</li>`).join('');
      const rateText = slide.cashbackRate ? t(slide.cashbackRate) : i18n[currentLang].defaults.rate;
      const snapshot = slide.snapshot || {};
      const timingType = snapshot.timingType || 'delayed';
      const fundingType = snapshot.fundingType || 'merchant';
      const timingTag = snapshot.timingTag ? t(snapshot.timingTag) : '';
      const fundingTag = snapshot.fundingTag ? t(snapshot.fundingTag) : '';
      return `
        <section class=\"slide\" id=\"slide-${index + 1}\" data-title=\"${navTitle}\">
          <div class=\"app-header\">
            <div class=\"app-title\">
              <div class=\"app-region\">${regionLabel}</div>
              <h2>${slide.name}</h2>
            </div>
            <div class=\"app-header-logo\">
              <img src=\"${slide.logo}\" alt=\"${slide.name} logo\" />
            </div>
          </div>
          <div class=\"app-body\">
            <div class=\"app-visual\">
              <div class=\"app-logo-card\">
                <img src=\"${slide.logo}\" alt=\"${slide.name} logo\" />
              </div>
              <div class=\"app-links\">
                <a class=\"app-link\" href=\"${slide.website}\" target=\"_blank\" rel=\"noreferrer\">${labels.website}</a>
                <a class=\"app-link primary\" href=\"${storeUrl}\" target=\"_blank\" rel=\"noreferrer\">${labels.getApp}</a>
              </div>
            </div>
            <div class=\"app-study\">
              <div class=\"study-section\">
                <div class=\"study-title\">${labels.region}</div>
                <div class=\"study-line\">${regionStudy}</div>
              </div>
              <div class=\"study-section\">
                <div class=\"study-title\">${labels.rate}</div>
                <div class=\"study-line\">${rateText}</div>
              </div>
              <div class=\"study-section\">
                <div class=\"study-title\">${labels.type}</div>
                <div class=\"study-line\">${typeLine}</div>
              </div>
              <div class=\"study-section\">
                <div class=\"study-title\">${labels.model}</div>
                <div class=\"study-line inline\">
                  <span class=\"tag ${slide.cashbackType}\">${modelTag}</span>
                  <span>${modelDescription}</span>
                </div>
              </div>
              <div class=\"study-section\">
                <div class=\"study-title\">${labels.strengths}</div>
                <ul class=\"study-list\">${strengths}</ul>
              </div>
              <div class=\"study-section\">
                <div class=\"study-title\">${labels.limits}</div>
                <ul class=\"study-list\">${limits}</ul>
              </div>
              <div class=\"study-section\">
                <div class=\"study-title\">${labels.why}</div>
                <ul class=\"study-list\">${whyItems}</ul>
              </div>
            </div>
          </div>
          ${watermark}
        </section>
      `;
    };

    const renderTakeawaysSlide = (slide, index, navTitle) => {
      const items = slide.items.map((item) => `<li>${item}</li>`).join('');
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${slide.title}</h2>
          <ul class="takeaways-list">${items}</ul>
          ${watermark}
        </section>
      `;
    };

    const renderLogicSlide = (slide, index, navTitle) => {
      const legend = i18n[currentLang].logicLabels;
      const legendItems = [
        { label: legend.behavior, icon: iconSet.behavior },
        { label: legend.timing, icon: iconSet.delayed },
        { label: legend.engagement, icon: iconSet.loop }
      ];
      const legendRow = legendItems.map((item) => `
        <div class="logic-legend-item">
          <span class="logic-legend-icon">${item.icon}</span>
          ${item.label}
        </div>
      `).join('');
      const leftIcons = [iconSet.cashback, iconSet.delayed, iconSet.wallet];
      const rightIcons = [iconSet.missions, iconSet.instant, iconSet.loop];
      const leftSteps = slide.left.steps.map((item, idx) => `
        <span class="logic-step">
          <span class="logic-step-icon">${leftIcons[idx] || iconSet.cashback}</span>
          ${t(item)}
        </span>${idx < slide.left.steps.length - 1 ? '<span class="logic-arrow">&rarr;</span>' : ''}
      `).join('');
      const rightSteps = slide.right.steps.map((item, idx) => `
        <span class="logic-step">
          <span class="logic-step-icon">${rightIcons[idx] || iconSet.missions}</span>
          ${t(item)}
        </span>${idx < slide.right.steps.length - 1 ? '<span class="logic-arrow">&rarr;</span>' : ''}
      `).join('');
      const loopItems = slide.right.loop.map((item, idx) => `
        <span class="loop-pill">${t(item)}</span>${idx < slide.right.loop.length - 1 ? '<span class="logic-arrow">&rarr;</span>' : ''}
      `).join('');
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <div class="logic-legend">${legendRow}</div>
          <div class="logic-grid">
            <div class="logic-panel">
              <div class="logic-title">${t(slide.left.title)}</div>
              <div class="logic-flow">${leftSteps}</div>
              <div class="logic-callout">${t(slide.left.callout)}</div>
            </div>
            <div class="logic-panel missions">
              <div class="logic-title">${t(slide.right.title)}</div>
              <div class="logic-flow">${rightSteps}</div>
              <div class="logic-loop">${loopItems}</div>
              <div class="logic-callout">${t(slide.right.callout)}</div>
            </div>
          </div>
          ${watermark}
        </section>
      `;
    };

    const renderMissionsSlide = (slide, index, navTitle) => {
      const leftItems = slide.left.items.map((item) => `<li>${t(item)}</li>`).join('');
      const flow = slide.right.flow.map((item, idx) => `
        <span class="mini-pill real">${t(item)}</span>${idx < slide.right.flow.length - 1 ? '<span class="mini-arrow">&rarr;</span>' : ''}
      `).join('');
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <div class="vision-grid">
            <div class="definition-card">
              <h3>${t(slide.left.title)}</h3>
              <ul>${leftItems}</ul>
            </div>
            <div class="definition-card">
              <h3>${t(slide.right.title)}</h3>
              <div class="mini-flow">${flow}</div>
              <div class="logic-callout">${t(slide.right.callout)}</div>
            </div>
          </div>
          ${watermark}
        </section>
      `;
    };

    const renderOverviewSlide = (slide, index, navTitle) => {
      const appSlides = slideData
        .map((item, idx) => ({ ...item, slideIndex: idx + 1 }))
        .filter((item) => item.type === 'app');

      const headers = i18n[currentLang].overview.headers;
      const legend = i18n[currentLang].overview.legend;
      const legendItems = [
        { key: 'real', className: 'real' },
        { key: 'promo', className: 'promo' },
        { key: 'merchant', className: 'merchant' },
        { key: 'issuer', className: 'issuer' },
        { key: 'partner', className: 'partner' },
        { key: 'hybrid', className: 'hybrid' },
        { key: 'instant', className: 'instant' },
        { key: 'delayed', className: 'delayed' }
      ];
      const legendTags = legendItems.map((item) => `
        <span class="tag ${item.className}">${legend[item.key]}</span>
      `).join('');

      const renderGrid = (apps) => {
        const rows = apps.map((app) => {
          const regionLabel = app.regionLabel ? t(app.regionLabel) : i18n[currentLang].regions[app.region];
          const typeTag = i18n[currentLang].overview.badges[app.cashbackType];
          const fundingType = app.snapshot?.fundingType || 'merchant';
          const timingType = app.snapshot?.timingType || 'delayed';
          const fundingTag = app.snapshot?.fundingTag ? t(app.snapshot.fundingTag) : legend[fundingType];
          const timingTag = app.snapshot?.timingTag ? t(app.snapshot.timingTag) : legend[timingType];
          return `
            <a class="comparison-cell comparison-app-link" href="#slide-${app.slideIndex}">
              <div class="comparison-logo">
                <img src="${app.logo}" alt="${app.name} logo" />
              </div>
              <div class="comparison-app">
                <div class="comparison-name">${app.name}</div>
                <div class="comparison-region">${regionLabel}</div>
              </div>
            </a>
            <div class="comparison-cell compact">
              <span class="tag ${app.cashbackType}">${typeTag}</span>
            </div>
            <div class="comparison-cell compact">
              <span class="tag ${fundingType}">${fundingTag}</span>
            </div>
            <div class="comparison-cell compact">
              <span class="tag ${timingType}">${timingTag}</span>
            </div>
          `;
        }).join('');
        return `
          <div class="comparison-grid" role="table">
            <div class="comparison-header">${headers.app}</div>
            <div class="comparison-header">${headers.type}</div>
            <div class="comparison-header">${headers.funding}</div>
            <div class="comparison-header">${headers.timing}</div>
            ${rows}
          </div>
        `;
      };

      const midpoint = Math.ceil(appSlides.length / 2);
      const leftApps = appSlides.slice(0, midpoint);
      const rightApps = appSlides.slice(midpoint);
      const logoWall = appSlides.map((app) => `
        <a class="logo-wall-item" href="#slide-${app.slideIndex}">
          <img src="${app.logo}" alt="${app.name} logo" />
        </a>
      `).join('');

      return `
        <section class="slide overview-slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <div class="comparison-legend">${legendTags}</div>
          <div class="comparison-split">
            ${renderGrid(leftApps)}
            ${renderGrid(rightApps)}
          </div>
          <div class="logo-wall">
            ${logoWall}
          </div>
          <div class="comparison-note">${i18n[currentLang].overview.note}</div>
          ${watermark}
        </section>
      `;
    };

    const renderVisionSlide = (slide, index, navTitle) => {
      const leftItems = slide.left.items.map((item) => `<li>${t(item)}</li>`).join('');
      const rightItems = slide.right.items.map((item) => `<li>${t(item)}</li>`).join('');
      const flowIcons = [iconSet.insight, iconSet.missions, iconSet.loop];
      const flowNodes = (slide.flow || []).map((item, idx) => {
        const icon = flowIcons[idx] || iconSet.insight;
        const highlight = idx === 1 ? ' highlight' : '';
        const node = `
          <div class="vision-node${highlight}">
            <div class="vision-icon">${icon}</div>
            <div>${t(item)}</div>
          </div>
        `;
        if (idx === (slide.flow || []).length - 1) return node;
        return `${node}<div class="vision-arrow" aria-hidden="true">&rarr;</div>`;
      }).join('');
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <div class="vision-flow" aria-label="Vision flow">
            ${flowNodes}
          </div>
          <div class="vision-grid">
            <div class="definition-card">
              <h3>${t(slide.left.title)}</h3>
              <ul>${leftItems}</ul>
            </div>
            <div class="definition-card">
              <h3>${t(slide.right.title)}</h3>
              <ul>${rightItems}</ul>
            </div>
          </div>
          ${watermark}
        </section>
      `;
    };

    const renderArchitectureSlide = (slide, index, navTitle) => {
      const archIcons = [iconSet.app, iconSet.engine, iconSet.cashback, iconSet.wallet];
      const nodes = slide.nodes.map((node, idx) => {
        const sub = slide.nodeSubs && slide.nodeSubs[idx]
          ? `<div class="flow-sub">${t(slide.nodeSubs[idx])}</div>`
          : '';
        const step = `
          <div class="flow-step">
            <div class="flow-icon">${archIcons[idx] || iconSet.app}</div>
            <div class="flow-label">${t(node)}</div>
            ${sub}
          </div>
        `;
        if (idx === slide.nodes.length - 1) return step;
        return `${step}<div class="flow-arrow" aria-hidden="true">&rarr;</div>`;
      }).join('');
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <div class="flow-diagram" aria-label="Conceptual architecture flow">
            ${nodes}
          </div>
          ${watermark}
        </section>
      `;
    };

    const renderRoadmapSlide = (slide, index, navTitle) => {
      const roadmapIcons = [iconSet.points, iconSet.handshake, iconSet.card];
      const phases = slide.phases.map((phase, idx) => `
        <div class="roadmap-card">
          <div class="roadmap-icon">${roadmapIcons[idx] || iconSet.points}</div>
          <div class="roadmap-phase">${t(phase.phase)}</div>
          <div class="roadmap-title">${t(phase.title)}</div>
          <p class="roadmap-text">${t(phase.text)}</p>
        </div>
      `).join('');
      const trackNodes = slide.phases.map((phase, idx) => {
        const node = `
          <div class="roadmap-node">
            <div class="roadmap-dot">${roadmapIcons[idx] || iconSet.points}</div>
            <div class="roadmap-label">${t(phase.phase)}</div>
          </div>
        `;
        if (idx === slide.phases.length - 1) return node;
        return `${node}<div class="roadmap-connector" aria-hidden="true"></div>`;
      }).join('');
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <div class="roadmap-visual" aria-label="Roadmap timeline">
            <div class="roadmap-track">
              ${trackNodes}
            </div>
          </div>
          <div class="roadmap-grid">
            ${phases}
          </div>
          ${watermark}
        </section>
      `;
    };

    const renderRoleSlide = (slide, index, navTitle) => {
      const items = slide.items.map((item) => `<li>${t(item)}</li>`).join('');
      const highlights = (slide.highlights || []).map((item) => `
        <span class="role-pill">
          <span class="role-pill-icon">${iconSet[item.icon] || iconSet.engine}</span>
          ${t(item.label)}
        </span>
      `).join('');
      const summary = slide.roleSummary ? `<div class="role-summary">${t(slide.roleSummary)}</div>` : '';
      return `
        <section class="slide" id="slide-${index + 1}" data-title="${navTitle}">
          <h2>${t(slide.title)}</h2>
          <div class="role-card">
            <div class="role-visual">
              <div class="role-badge">
                <div class="role-badge-icon">${iconSet.leader}</div>
                <div>
                  <div class="role-title">${t(slide.roleTitle)}</div>
                  ${summary}
                </div>
              </div>
              <div class="role-pills">${highlights}</div>
            </div>
            <ul class="role-list">${items}</ul>
          </div>
          ${watermark}
        </section>
      `;
    };

    const renderSlide = (slide, index) => {
      const regionName = slide.type === 'app'
        ? (slide.regionLabel ? t(slide.regionLabel) : i18n[currentLang].regions[slide.region])
        : '';
      const navTitle = slide.navTitle || (slide.type === 'app'
        ? `${regionName} - ${slide.name}`
        : t(slide.title) || slide.name || `Slide ${index + 1}`);
      if (slide.type === 'cover') return renderCoverSlide(slide, index, navTitle);
      if (slide.type === 'agenda') return renderAgendaSlide(slide, index, navTitle);
      if (slide.type === 'definition') return renderDefinitionSlide(slide, index, navTitle);
      if (slide.type === 'app') return renderAppSlide(slide, index, navTitle);
      if (slide.type === 'overview') return renderOverviewSlide(slide, index, navTitle);
      if (slide.type === 'logic') return renderLogicSlide(slide, index, navTitle);
      if (slide.type === 'missions') return renderMissionsSlide(slide, index, navTitle);
      if (slide.type === 'vision') return renderVisionSlide(slide, index, navTitle);
      if (slide.type === 'architecture') return renderArchitectureSlide(slide, index, navTitle);
      if (slide.type === 'roadmap') return renderRoadmapSlide(slide, index, navTitle);
      if (slide.type === 'role') return renderRoleSlide(slide, index, navTitle);
      if (slide.type === 'takeaways') return renderTakeawaysSlide(slide, index, navTitle);
      return '';
    };

    const buildSlides = () => {
      slidesRoot.innerHTML = slideData.map((slide, index) => renderSlide(slide, index)).join('');
    };
    let slides = [];

    const buildNavigation = () => {
      navList.innerHTML = '';
      slides.forEach((slide, index) => {
        const label = slide.dataset.title || `Slide ${index + 1}`;
        const li = document.createElement('li');
        const link = document.createElement('a');
        link.href = `#slide-${index + 1}`;
        link.textContent = `${index + 1}. ${label}`;
        link.addEventListener('click', (event) => {
          event.preventDefault();
          showSlide(index, true);
        });
        li.appendChild(link);
        navList.appendChild(li);
      });
    };

    let current = 0;

    const updateLangButtons = () => {
      const buttons = langToggle.querySelectorAll('.lang-btn');
      buttons.forEach((btn) => {
        btn.classList.toggle('active', btn.dataset.lang === currentLang);
      });
    };

    const renderAll = () => {
      const ui = i18n[currentLang].ui;
      buildSlides();
      slides = Array.from(document.querySelectorAll('.slide'));
      buildNavigation();
      if (current >= slides.length) current = slides.length - 1;
      if (current < 0) current = 0;
      if (deckTitle) deckTitle.textContent = ui.deckTitle;
      if (deckSubtitle) deckSubtitle.textContent = ui.deckSubtitle;
      prevBtn.textContent = ui.prev;
      nextBtn.textContent = ui.next;
      fsBtn.textContent = ui.fullscreen;
      document.title = ui.deckTitle;
      showSlide(current, false);
      updateLangButtons();
    };

    const updateActiveNav = () => {
      const links = navList.querySelectorAll('a');
      links.forEach((link, index) => {
        link.classList.toggle('active', index === current);
      });

      const label = slides[current].dataset.title || `Slide ${current + 1}`;
      title.textContent = `${label}`;
      progress.textContent = `${current + 1} / ${slides.length}`;

      prevBtn.disabled = current === 0;
      nextBtn.disabled = current === slides.length - 1;
    };

    const showSlide = (index, updateHash) => {
      if (index < 0 || index >= slides.length) return;
      slides[current].classList.remove('active');
      current = index;
      slides[current].classList.add('active');
      updateActiveNav();
      if (updateHash) {
        history.replaceState(null, '', `#slide-${current + 1}`);
      }
    };

    const parseHash = () => {
      const match = window.location.hash.match(/slide-(\d+)/);
      if (match) {
        const idx = Math.max(1, Math.min(slides.length, parseInt(match[1], 10))) - 1;
        showSlide(idx, false);
      }
    };

    const handleClickNavigation = (event) => {
      if (event.target.closest('button') || event.target.closest('a')) return;
      const bounds = slidesRoot.getBoundingClientRect();
      const midpoint = bounds.left + bounds.width / 2;
      if (event.clientX < midpoint) {
        showSlide(current - 1, true);
      } else {
        showSlide(current + 1, true);
      }
    };

    const handleKey = (event) => {
      if (event.key === 'ArrowRight') {
        showSlide(current + 1, true);
      }
      if (event.key === 'ArrowLeft') {
        showSlide(current - 1, true);
      }
    };

    const toggleFullscreen = () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(() => {});
      } else {
        document.exitFullscreen().catch(() => {});
      }
    };

    const setLanguage = (lang) => {
      if (!i18n[lang] || currentLang === lang) return;
      currentLang = lang;
      localStorage.setItem('deckLang', lang);
      renderAll();
      parseHash();
      updateActiveNav();
    };

    prevBtn.addEventListener('click', () => showSlide(current - 1, true));
    nextBtn.addEventListener('click', () => showSlide(current + 1, true));
    fsBtn.addEventListener('click', toggleFullscreen);
    langToggle.addEventListener('click', (event) => {
      const button = event.target.closest('.lang-btn');
      if (!button) return;
      setLanguage(button.dataset.lang);
    });
    slidesRoot.addEventListener('click', handleClickNavigation);
    window.addEventListener('keydown', handleKey);
    window.addEventListener('hashchange', parseHash);

    renderAll();
    parseHash();
    updateActiveNav();
  </script>
</body>
</html>
